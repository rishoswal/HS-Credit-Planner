<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />

    <script src="jquery-3.6.0.min.js"></script>
    <script src="course_catalog.js"></script>

    <title>High School Credits Planner</title>
    <script>

        // this function loads in all the school districts
        function LoadSchoolDistrictsList() {
            // finds element in planner_home.html with districtDDL tag
            let districtDDL = document.getElementById("districtDDL");
            // creates empty array for loading in district options
            var districtOptions = [];

            /*
                for each value in the school districts collection (course_catalog.js),
                create a new option, change the name and id to the district info,
                and push the option into the districtOptions array
            */
            school_districts_collection.forEach(district => {
                var option = document.createElement('option');
                option.text = district.school_district_name;
                option.value = district.school_district_id;
                districtOptions.push(option);
            });

            /*
                array option sorting
            */
            districtOptions = districtOptions.sort(function (a, b) {
                return a.text == b.text ? 0 : a.text > b.text ? 1 : -1;
            });

            /*
                Add everything to the districtDDL by first creating a select option
                and then use a forEach loop to add every option in the districtOptions array
            */
            districtDDL.options.length = 0;
            var option = document.createElement('option');

            option.text = "select";
            option.value = 0;
            districtDDL.add(option);

            districtOptions.forEach(o => {
                districtDDL.add(o);
            });

            // TODO: Remove this code
            districtDDL.value = "101";
            OnDistrictSelectionChanged();
            var schoolDDL = document.getElementById("schoolDDL");
            schoolDDL.value = "1001";
        }


        function OnDistrictSelectionChanged() {
            var selectedDistrict = document.getElementById("districtDDL");
            var schoolDDL = document.getElementById("schoolDDL");

            var districtText = selectedDistrict.options[selectedDistrict.selectedIndex].text;
            document.getElementById("district").innerHTML = districtText;

            var districtId = selectedDistrict.options[selectedDistrict.selectedIndex].value;
            var schoolOptions = [];

            course_collection.forEach(school => {
                if (school.school_district_id === districtId) {
                    var option = document.createElement('option');
                    option.text = school.school_name;
                    option.value = school.school_id;
                    schoolOptions.push(option);
                }
            });

            schoolOptions = schoolOptions.sort(function (a, b) {
                return a.text == b.text ? 0 : a.text > b.text ? 1 : -1;
            });

            schoolDDL.options.length = 0;

            var option = document.createElement('option');
            option.text = "select";
            option.value = 0;
            schoolDDL.add(option);

            schoolOptions.forEach(o => {
                schoolDDL.add(o);
            });
        }

        function GetCatalog(schoolId) {
            var match = null;

            course_collection.forEach(school => {

                if (school.school_id === schoolId) {
                    match = school;
                }

            });

            return match;
        }

        


        function PopulateCoursesInDDL(subject_ddl_id, courses) {

            var subjectOptions = [];
            var subjectDDL = document.getElementById(subject_ddl_id);
            subjectDDL.options.length = 0;

            var defaultOption = document.createElement('option');
            defaultOption.text = "select";
            defaultOption.value = 0;
            subjectDDL.add(defaultOption);

            var noneOption = document.createElement('option');
            noneOption.text = "none";
            noneOption.value = 1;
            subjectDDL.add(noneOption);

            var s = "";

            courses.forEach(c => {
                s += c.name + " " + c.course_id;
                var option = document.createElement('option');
                option.text = c.name;
                option.value = c.course_id;
                subjectOptions.push(option);
                subjectDDL.options.add(option);
            });

            document.getElementById("debugInfo").innerHTML = "debug - " + s;
        }

        function PopulateCoursesLists(ddl_id1, ddl_id2) {
            var selectedDistrict = document.getElementById(ddl_id1);
            var selectedSchool = document.getElementById(ddl_id2);

            var districtText = selectedDistrict.options[selectedDistrict.selectedIndex].text;
            document.getElementById("district").innerHTML = districtText;

            var selectedSchoolText = selectedSchool.options[selectedSchool.selectedIndex].text;
            var selectedSchoolId = selectedSchool.options[selectedSchool.selectedIndex].value;
            document.getElementById("school").innerHTML = selectedSchoolText;

            let catalog = GetCatalog(selectedSchoolId);

            PopulateCoursesInDDL("english91", catalog.class9.english);
            PopulateCoursesInDDL("english92", catalog.class9.english);

            PopulateCoursesInDDL("english101", catalog.class10.english);
            PopulateCoursesInDDL("english102", catalog.class10.english);

            PopulateCoursesInDDL("english111", catalog.class11.english);
            PopulateCoursesInDDL("english112", catalog.class11.english);

            PopulateCoursesInDDL("english121", catalog.class12.english);
            PopulateCoursesInDDL("english122", catalog.class12.english);

            PopulateCoursesInDDL("history91", catalog.class9.social_studies);
            PopulateCoursesInDDL("history92", catalog.class9.social_studies);

            PopulateCoursesInDDL("history101", catalog.class10.social_studies);
            PopulateCoursesInDDL("history102", catalog.class10.social_studies);

            PopulateCoursesInDDL("history111", catalog.class11.social_studies);
            PopulateCoursesInDDL("history112", catalog.class11.social_studies);

            PopulateCoursesInDDL("history121", catalog.class12.social_studies);
            PopulateCoursesInDDL("history122", catalog.class12.social_studies);
        
            PopulateCoursesInDDL("math91", catalog.class9.mathematics);
            PopulateCoursesInDDL("math101", catalog.class10.mathematics);
            PopulateCoursesInDDL("math111", catalog.class11.mathematics);
            PopulateCoursesInDDL("math121", catalog.class12.mathematics);

            PopulateCoursesInDDL("science91", catalog.class9.science);
            PopulateCoursesInDDL("science92", catalog.class9.science);

            PopulateCoursesInDDL("science101", catalog.class10.science);
            PopulateCoursesInDDL("science102", catalog.class10.science);

            PopulateCoursesInDDL("science111", catalog.class11.science);
            PopulateCoursesInDDL("science112", catalog.class11.science);

            PopulateCoursesInDDL("science121", catalog.class12.science);
            PopulateCoursesInDDL("science122", catalog.class12.science);
        }

    </script>
</head>
<body onload="LoadSchoolDistrictsList()">
    <h1>High School Credit Planner</h1>
    <br /><br />
    <table width="30%">
        <tr>
            <td>
                School District
            </td>
            <td>
                <select id="districtDDL" onchange="OnDistrictSelectionChanged();" style="width: 75%;">
                    <option value="select">Select</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                School
            </td>
            <td>
                <select id="schoolDDL" style="width: 75%;">
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <button type="confirmationButton" onclick='PopulateCoursesLists("districtDDL", "schoolDDL")'>Confirm</button>
            </td>
        </tr>

    </table>
    <br /><br />
    <div id="district"><b>District</b></div>
    <br />
    <div id="school"><b>School</b></div>
    <br />
    <div id="debugInfo"><b>Debug Info</b></div>
    <br /><br />
    <table>
        <tr>
            <td>
                <table border="1" width="50%">
                    <tr style="height: 50px;background-color:lightblue">
                        <td width="20%">Period</td>
                        <td width="20%" colspan="2">9th Grade</td>
                        <td width="20%" colspan="2">10th Grade</td>
                        <td width="20%" colspan="2">11th Grade</td>
                        <td width="20%" colspan="2">12th Grade</td>
                    </tr>
                    <tr>
                        <td width="20%"></td>
                        <td width="20%">Semester 1</td>
                        <td width="20%">Semester 2</td>
                        <td width="20%">Semester 1</td>
                        <td width="20%">Semester 2</td>
                        <td width="20%">Semester 1</td>
                        <td width="20%">Semester 2</td>
                        <td width="20%">Semester 1</td>
                        <td width="20%">Semester 2</td>
                    </tr>

                    <tr>
                        <td>English</td>
                        <td>
                            <select name="English9Sem1" id="english91" size="5" style="width: 150px;">
                                <option value="select">click confirm button</option>
                            </select>
                        </td>
                        <td>
                            <select name="English9Sem2" id="english92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English10Sem1" id="english101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English10Sem2" id="english102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English11Sem1" id="english111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English11Sem2" id="english112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English12Sem1" id="english121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="English12Sem2" id="english122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Social Studies</td>
                        <td>
                            <select name="History9Sem1" id="history91" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History9Sem2" id="history92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History10Sem1" id="history101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History10Sem2" id="history102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History11Sem1" id="history111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History11Sem2" id="history112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History12Sem1" id="history121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="History12Sem2" id="history122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Science</td>
                        <td>
                            <select name="Science9Sem1" id="science91" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science9Sem2" id="science92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science10Sem1" id="science101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science10Sem2" id="science102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science11Sem1" id="science111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science11Sem2" id="science112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science12Sem1" id="science121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="Science12Sem2" id="science122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Mathematics</td>
                        <td colspan="2">
                            <select name="Math9" id="math91" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="Math10" id="math101" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="Math11" id="math111" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="Math12" id="math121" size="5" style="width: 300px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Career & Tech. Ed.</td>
                        <td>
                            <select name="CTE9Sem1" id="cte91" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE9Sem2" id="cte92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE10Sem1" id="cte101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE10Sem2" id="cte102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE11Sem1" id="cte111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE11Sem2" id="cte112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE12Sem1" id="cte121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="CTE12Sem2" id="cte122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Health & Phys. Ed.</td>
                        <td>
                            <select id="HPE9Sem1" id="hpe91" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE9Sem2" id="hpe92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE10Sem1" id="hpe101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE10Sem2" id="hpe102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE11Sem1" id="hpe111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE11Sem2" id="hpe112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE12Sem1" id="hpe121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="HPE12Sem2" id="hpe122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>Visual and Perf. Arts</td>
                        <td>
                            <select id="VPA9Sem1" id="vpa91" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA9Sem2" id="vpa92" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA10Sem1" id="vpa101" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA10Sem2" id="vpa102" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA11Sem1" id="vpa111" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA11Sem2" id="vpa112" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA12Sem1" id="vpa121" size="5" style="width: 150px;">

                            </select>
                        </td>
                        <td>
                            <select name="VPA12Sem2" id="vpa122" size="5" style="width: 150px;">

                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>World Languages</td>
                        <td colspan="2">
                            <select id="WL9" id="wl91" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="WL10" id="wl101" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="WL11" id="wl111" size="5" style="width: 300px;">

                            </select>
                        </td>
                        <td colspan="2">
                            <select name="WL12" id="wl121" size="5" style="width: 300px;">

                            </select>
                        </td>
                    </tr>

                </table>
            </td>
            <td>
                <table border="1" width="50%">
                    <tr style="height: 50px;background-color:lightblue">
                        <td width="20%" style="width: 150px;">Subject</td>
                        <td width="20%" style="width: 150px;">Required Credits</td>
                        <td width="20%" style="width: 150px;">Credits for Currently Selected Subjects</td>
                        <td width="20%" style="width: 150px;">11th Grade</td>
                        <td width="20%" style="width: 150px;">12th Grade</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>